---
title: Linux工作流（一）
seo_title: seo名称
toc: true
indent: true
top: false
comments: true
archive: true
cover: false
mathjax: false
pin: false
top_meta: false
bottom_meta: false
sidebar:
  - toc
tag:
  - Linux
  - 工作流
categories: 工作流
keywords: 文章关键词
updated: ''
img: /medias/featureimages/41.webp
date:
summary: Linux常见命令
---
# Linux工作流（一）
## Linux基础操作
### 1.引言
#### 1.1Linux基本介绍
>一款**开源免费**的操作系统，主要应用在**服务器领域**，借鉴了**unix系统**的思想，有**ubuntu**、**debain**等发行版

#### 1.2Linux安装
**①双系统安装**

**②虚拟机安装**

#### 1.3Linux目录结构
{%right%}
Linux下一切皆文件，包括硬件也会被映射为一个文件
{%endright%}
{%list%}
主要介绍根目录下的各个目录，每个目录存放特定的文件
{%endlist%}
>**bin**：存放**经常使用的命令**，如`cd`等
{%list%}
sbin存放只有管理员才能使用的命令
{%endlist%}
>**home**：存放**普通用户**的**主目录**
{%list%}
root存放管理员的主目录
{%endlist%}
>**lib**：存放**系统**使用的**动态链接库**

>**ect**：存放**系统管理**所需要的**配置文件**

>**usr**：存放**系统自带文件**，其中`usr/local`为**用户使用系统安装**的软件
{%list%}
opt为用户手动安装软件的安装路径
{%endlist%}
>**boot**：Linux**启动**时所需要的**核心文件**

>**tmp**：存放**临时文件**

>**dev**：存放**系统硬件**如CPU的**映射**，类似于windows的**设备管理器**

>**media**：存放**自动挂载**，如**U盘**等
{%list%}
mnt存放手动挂载
{%endlist%}
{%right%}
dev存放U盘的映射，media存放U盘的内容
{%endright%}
>**var**：存放**经常被修改**的东西，如**日志文件**

>**proc**：存储的是Linux运行时的**进程映射**
### 2.常用命令
{%right%}
没有反应一般就是成功
{%endright%}
#### 2.1基础命令
>`clear`：**清除命令行**

>`ls`：列出**当前路径**的文件
{%list%}
-a显示隐藏文件，-l显示详细文件信息（单列输出），-h人性化输出，如以K、M等单位显示文件大小
{%endlist%}
>`cd [目录路径]`：切换到**目录下**
{%list%}
.表示当前目录，..表示上一级目录，～表示家目录
{%endlist%}
>`echo [输出内容]`：将**对应内容**输出到**控制台**
{%right%}
可以使用echo $PATH输出环境变量
{%endright%}
>`pwd`：显示**当前目录**的**绝对路径**

>`man [命令或者配置文件]`：获得**对应**的**帮助信息**
{%list%}
对应help只能获得shell内置命令的帮助
{%endlist%}
>`shutdown [选项] [时间]`：**一段时间后**执行**对应操作**
{%list%}
-h选项是关机，-r选项是重启，时间以分钟为单位
{%endlist%}
>`sync`：将**内存数据**同步到**磁盘**
{%list%}
类似于保存，每次关机重启前要输入这条命令
{%endlist%}
>`init [级别数字]`：指定**运行级别**
{%list%}
运行级别不同，关机等命令行、图形界面
{%endlist%}
>`data`：查看**当前时间**
{%list%}
date命令通过-s选项设置时间
{%endlist%}
#### 2.2用户与组
**①用户管理**
>`useradd [用户名]`：**创建**账户
{%list%}
使用-d选项指定家目录路径
{%endlist%}
>`passwd [用户名]`：设置/修改**密码**

>`userdel [用户名]`：**删除**用户，但是**保留**了他的**家目录**
{%list%}
使用-r选项删除其家目录
{%endlist%}
>`id [用户名]`：查询**用户信息**（`uid`和`gid`）
{%list%}
/etc/passwd中包含了每个用户的信息，/etc/shadow包含了用户口令的配置文件
{%endlist%}
>`whoami`：查询**当前用户**

>`su - [用户名]`：**切换**用户

**②组管理**
>`groupadd [组名]`：**新建**组
{%list%}
/etc/group包含了组的信息
{%endlist%}
>`groupdel [组名]`：**删除**组

>`useradd -g [组名] [用户名]`：**创建**账户时给其**指定组**/**修改**用户所在组
{%list%}
若创建用户时没有指定组，则会给起创建一个与其名字相同的组并将其放入
{%endlist%}
>`usermod -g [新组名] [用户]`：**修改**用户**所在组**
#### 2.3辅助命令
>`|`：**管道**命令，将**前一个命令得到的输出**作为**下一个命令的输入**

>`> [文件路径]`：将命令的输出**重定向**到对应**文件**

>`>> [文件路径]`：将命令的输出**追加**到对应**文件**
{%list%}
若对应文件不存在，则会创建该命令
{%endlist%}
>`ln -s [源文件或者目录] [软连接路径]`：给**对应文件/目录**创建**软链接**，类似于**快捷方式**

>`history [数字]`：查看**历史命令**

>`grep [选项] “[查找内容]“ [文件路径]`：在**对应文件**中查找**对应内容**
{%list%}
-n选项显示匹配行和行号，-i忽略字母大小写
{%endlist%}
{%right%}
常常和管道命令联合使用，使用其他命令输出替代对应文件
{%endright%}
### 3.文件管理
#### 3.1基本操作
**①创建**
>`touch [文件路径]`：**创建**文件/**更新**文件**修改时间**

>`mkdir [目录路径]`：**创建**对应**目录**
{%list%}
使用-p选项创建多级目录，如mkdir -p a/b/c
{%endlist%}
{%right%}
/home表示根目录下有个home，系统会自动检测其是文件还是文件夹，而/home/表示根目录下有个home文件夹
{%endright%}
**②删除**
>`rmdir [目录路径]`：**删除**指定**空目录**

>`rm [文件路径]`：**删除**指定**文件**
{%list%}
可使用rm的-rf选项可递归删除非空目录
{%endlist%}

**③移动**
>`mv [源文件路径] [文件路径]`：将**源文件**复制到**对应路径**并对其**重命名**
{%list%}
若两路径一致，则是重命名
{%endlist%}
>`mv [源文件路径] [目录路径]`：将**源文件**移动到**对应目录下**
{%list%}
该文件也可以是目录
{%endlist%}

**④复制**
>`cp [源文件路径] [存放目录路径]`：将**文件**复制到**对应目录下**
{%list%}
使用-r选项递归复制整个文件夹
{%endlist%}
{%right%}
\cp强制忽略覆盖信息
{%endright%}
**⑤查看**
>`less [文件路径]`：查看文件，查看**大型文件**友好

>`head [文件路径]`：查看文件**头部信息**

>`tail [文件路径]`：查看文件**尾部信息**
{%list%}
-f选项可以使用终端实时监控文件的修改
{%endlist%}
**⑥查找**
>`find [搜索目录路径] [选项] [对应条件]`：在**指定路径**下根据**提供的条件**递归**搜索文件**
>`find /home -size +200M`：查找**大于200M**的文件，若**条件选项前**为`-`则是**小于**，缺省是**等于**
{%list%}
-name是名字，-size是文件大小，-user是用户名
{%endlist%}

>`locate [文件名]`：快速**定位文件**并**绝对路径**
{%list%}
locate是基于数据库系统进行查询的，所以在使用该命令之前需要使用updatedb创建/更新数据库
{%endlist%}
>`which [指令名]`：返回**指令文件**的**绝对路径**

**⑦压缩**
>`tar [选项]`：根据选项**压缩/解压**文件
{%list%}
-c产生.tar打包文件、-v显示详细信息、-f指定压缩后的文件名，-z打包同时压缩，-x解压
{%endlist%}
{%right%}
通常，压缩使用-zcvf选项，解压使用-xcvf，还可使用-C选项指定解压路径
{%endright%}
>`tar -zcvf xxx.tar.gz [文件/目录路径]`：**压缩文件**并**指定压缩包名**

>`tar -zcvf xxx.tar.gz -C [目录路径]`：**解压**压缩包到**指定路径**

#### 3.2文件权限
**①文件归属**
{%list%}
每个文件都有所有者、所在组和其他组，每个对象对其权限不同
{%endlist%}
>文件被**创建时**，其**所有者**被初始化为**创建者**，**所在组**被初始化为**创建者当时所在组**

>`chown [用户名] [文件路径/目录路径]`：修改**文件所有者**

>`chown [用户名]:[组名] [文件路径/目录路径]`：修改**文件所有者以及所在组**

>`chgrp [组名] [文件路径/目录路径]`：修改**文件所在组**
{%right%}
均可使用-R选项递归的修改目录下所有文件
{%endright%}
>如`chgrp -R [组名] [目录路径]`

**②文件信息**
{%list%}
使用ls -la查看某文件信息如下
{%endlist%}
>`-rw-rw-r--  1 zfk zfk 581565 11月 20 19:24 book-riscv-rev3.pdf`
{%list%}
第一串字符各个位都有其特殊的含义
{%endlist%}
>**第0位**：表示**文件的类型**，**普通文件**`-`、**链接**`l`、**目录**`d`、**字符设备**`c`和**块设备**`b`

>**1-3位**：分别表示**文件所有者**对该文件是否有**读**`r`、**写**`w`和**执行**`x`权限，若为`-`则**表示没有**

>**4-6位**：**所在组**是否对该文件有**对应权限**

>**7-9位**：**其他用户**是否对该文件有**对应权限**
{%list%}
读、写和执行权限对于文件和目录的含义是不同的
{%endlist%}
>**文件**：**读**表示可以**查看该文件**，**写**表示可以**修改该文件信息**，**执行**表示可以**执行该文件**

>**目录**：**读**表示可以**查看目录信息以及其下有那些文件（可以ls）**，**写**表示可以**在其中创建、删除文件，以及目录的重命名**，**执行**表示可以**进入该目录**
{%right%}
目录的读写权限不会影响文件的权限，但没有目录的执行权限，则无法访问其中文件
{%endright%}
{%warning%}
只有对目录有写权限，才能删除其下文件
{%endwarning%}
>**剩余信息**：分别表示**硬链接数/（文件数+子目录数）**、**所有者**、**所在组**、**文件大小**、**最后修改期限**和**文件名字**

**③权限修改**
{%list%}
u表示所有者，g表示所在组，o表示其他人，a表示所有人
{%endlist%}
>`chmod u=rwx,g=rx,o=x [文件路径/目录路径]`：修改**对应的权限**

>`chmod o+w [文件路径/目录路径]`：给**其他用户添加**写权限，如果是`-`表示**剥夺对应权限**
{%right%}
有一种简洁的修改方法，其中r--为4，-w-为2，--x为1，rw-为6，依此类推，按照顺序与之对应
{%endright%}

>`chmod 761 [文件路径/目录路径]`：赋予该文件**所有者所有权限**，**所在组读写权限**，**其他人执行权限**


gdb安装，发现程序的逻辑错误
printf语句打印关键变量

gdb [可执行文件名] 使用gdb打开对应文件，进入gdb程序
需要先编译
b [行号]：在对应行设置断点
r：开始运行程序，遇到断点停止
n：执行当前语句，如果当前语句为函数调用，则不会进入函数
也可以看作执行下一语句
p [变量名]：显示变量名
可以表达式/函数，会打印其返回值，如果是函数还会执行，不会改变变量，如p a+b
p print("abc") 屏幕上会显示abc和3

c：继续执行，直到遇到断点或者结束
set var [变量名]=[值]：给变量赋值
定时任务调度
ubuntu如何找回用户密码？

